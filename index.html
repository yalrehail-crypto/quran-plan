<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</title>

<style>
body{
  font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
  background:#0b1220;
  color:#fff;
  margin:0;
  padding:20px;
  text-align:center;
}
.card{
  max-width:520px;
  margin:auto;
  background:#121b31;
  border-radius:18px;
  padding:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
h1{margin:0 0 10px 0;font-size:32px;}
.sub{
  color:#cbd5e1;
  margin:6px 0;
  font-size:18px;
}
.divider{
  height:1px;
  background:rgba(255,255,255,.12);
  margin:16px 0;
}
.modeTitle{
  font-size:18px;
  margin-bottom:8px;
  color:#cbd5e1;
}
.modeRow{
  text-align:right;
  margin-bottom:10px;
}
select{
  padding:8px;
  border-radius:8px;
  border:none;
  font-size:16px;
}
input[type="number"]{
  width:100%;
  padding:16px;
  border-radius:14px;
  border:none;
  font-size:22px;
  text-align:right;
  margin-top:10px;
}
button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  background:#3461ff;
  color:#fff;
  font-size:20px;
  margin-top:12px;
  cursor:pointer;
}
#result{
  margin-top:16px;
  font-size:22px;
  line-height:1.8;
  color:#93c5fd;
  white-space:pre-line;
}
.footer{
  margin-top:18px;
  padding-top:14px;
  border-top:1px solid rgba(255,255,255,.12);
  color:#9ca3af;
  font-size:14px;
}
</style>
</head>

<body>
<div class="card">

<h1>ğŸ“– Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</h1>

<div class="sub" id="hijriDateLine"></div>
<div class="sub" id="timeLine"></div>

<div class="divider"></div>

<div class="modeTitle">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</div>

<div class="modeRow">
  <label>
    <input type="radio" name="mode" value="hijriMonth" checked onchange="toggleMode()">
    Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ)
  </label>
</div>

<div class="modeRow">
  <label>
    <input type="radio" name="mode" value="days" onchange="toggleMode()">
    Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…
  </label>
  <select id="daysSelect" disabled>
    <option value="60">60 ÙŠÙˆÙ…</option>
    <option value="30" selected>30 ÙŠÙˆÙ…</option>
    <option value="15">15 ÙŠÙˆÙ…</option>
  </select>
</div>

<input id="currentPage" type="number"
placeholder="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù„ÙŠ ÙˆØµÙ„Øª Ù„Ù‡Ø§ (1 - 604)" />

<button onclick="calculatePlan()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©</button>

<div id="result"></div>

<div class="footer">ğŸ”¥ğŸ’» Ù…Ø¹ ØªØ­ÙŠØ§Øª :Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø±Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø¯Ø¨Ù„Ù‡</div>

</div>

<script>
const TOTAL_PAGES = 604;

function getHijriParts(date){
  const fmt = new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{
    day:"numeric",month:"numeric",year:"numeric"
  });
  const parts = fmt.formatToParts(date);
  let obj={};
  parts.forEach(p=>{
    if(p.type==="day") obj.day=parseInt(p.value);
    if(p.type==="month") obj.month=parseInt(p.value);
    if(p.type==="year") obj.year=parseInt(p.value);
  });
  return obj;
}

function updateHeader(){
  const now=new Date();
  const hijri=new Intl.DateTimeFormat("ar-SA-u-ca-islamic",
  {weekday:"long",day:"numeric",month:"long",year:"numeric"}).format(now);

  const time=new Intl.DateTimeFormat("ar-SA",
  {hour:"numeric",minute:"2-digit",second:"2-digit"}).format(now);

  document.getElementById("hijriDateLine").textContent="ğŸ“… "+hijri;
  document.getElementById("timeLine").textContent="â° "+time;
}

function getDaysLeftInHijriMonth(){
  const today=new Date();
  const hNow=getHijriParts(today);
  let d=new Date(today);
  let count=1;

  while(true){
    d.setDate(d.getDate()+1);
    const h=getHijriParts(d);
    if(h.day===1 && h.month!==hNow.month) break;
    count++;
    if(count>35) break;
  }
  return count;
}

function toggleMode(){
  const mode=document.querySelector('input[name="mode"]:checked').value;
  document.getElementById("daysSelect").disabled=(mode!=="days");
}

function calculatePlan(){
  const current=parseInt(document.getElementById("currentPage").value);
  const result=document.getElementById("result");
  result.textContent="";

  if(isNaN(current)||current<1||current>604){
    result.textContent="âŒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ø¨ÙŠÙ† 1 Ùˆ 604";
    return;
  }

  const remaining=TOTAL_PAGES-current;
  if(remaining<=0){
    result.textContent="âœ… Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡! Ø®ØªÙ…Øª Ø§Ù„Ù‚Ø±Ø¢Ù† ğŸ‰";
    return;
  }

  const mode=document.querySelector('input[name="mode"]:checked').value;
  let days;

  if(mode==="hijriMonth"){
    days=getDaysLeftInHijriMonth();
  }else{
    days=parseInt(document.getElementById("daysSelect").value);
  }

  const perDay=Math.ceil(remaining/days);

  result.textContent=
  "ğŸ“˜ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: "+remaining+"\n"+
  "ğŸ“… Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: "+days+"\n"+
  "ğŸ“– Ø§Ù‚Ø±Ø£ ÙŠÙˆÙ…ÙŠØ§Ù‹: "+perDay+" ØµÙØ­Ø©\n"+
  "âœ… Ù„ØªØ®ØªÙ… Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ø©";
}

updateHeader();
setInterval(updateHeader,1000);
</script>

</body>
</html>
