<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</title>
  <style>
    :root{
      --bg:#081426;
      --card:#0f2140cc;
      --card2:#0c1b34cc;
      --text:#ffffff;
      --muted:#b9c6df;
      --muted2:#93a4c6;
      --accent:#3f66ff;
      --accent2:#2b4dd6;
      --white:#ffffff;
      --input:#f3f5f9;
      --shadow: 0 20px 50px rgba(0,0,0,.35);
      --radius: 26px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 50% -200px, #143261 0%, var(--bg) 55%, #050b14 100%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:24px 14px 60px;
    }

    .wrap{
      width:min(720px, 100%);
    }

    .card{
      background: linear-gradient(180deg, rgba(14,33,70,.95), rgba(10,22,45,.92));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 26px 18px 22px;
      overflow:hidden;
    }

    .title{
      text-align:center;
      font-weight:900;
      letter-spacing:.5px;
      font-size: clamp(34px, 6vw, 58px);
      margin: 4px 0 6px;
    }
    .title .emoji{ font-size: .65em; vertical-align: middle; margin-right:10px;}
    .sub{
      text-align:center;
      color:var(--muted);
      font-size: clamp(16px, 2.4vw, 20px);
      line-height:1.7;
      margin: 0 0 8px;
    }
    .time{
      text-align:center;
      color:var(--muted);
      font-size: clamp(18px, 2.6vw, 22px);
      margin: 6px 0 16px;
    }

    hr.sep{
      border:none;
      height:1px;
      background: rgba(255,255,255,.12);
      margin: 14px 0 18px;
    }

    /* Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø³ØªØ§ÙŠÙ„ Ø£Ù†ÙŠÙ‚) */
    .sectionTitle{
      text-align:center;
      font-size: 22px;
      color: var(--muted);
      font-weight: 800;
      margin: 8px 0 14px;
    }

    .modeBox{
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      padding: 14px;
      display:grid;
      gap: 12px;
      margin-bottom: 14px;
    }

    .modeRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.06);
    }

    .modeLeft{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .radio{
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.45);
      display:grid;
      place-items:center;
      flex: 0 0 auto;
    }
    .radio .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: transparent;
    }
    .modeRow.active .radio{
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(63,102,255,.22);
    }
    .modeRow.active .radio .dot{ background: var(--accent); }

    .modeText{
      min-width:0;
    }
    .modeText b{
      display:block;
      font-size: 18px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .modeText small{
      display:block;
      color: var(--muted2);
      margin-top: 2px;
      font-size: 13px;
    }

    .pill{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      padding: 10px 12px;
      border-radius: 16px;
      display:flex;
      align-items:center;
      gap: 8px;
      flex: 0 0 auto;
    }
    select{
      background: transparent;
      border:none;
      color: var(--white);
      outline:none;
      font-size: 16px;
      font-weight: 800;
      appearance: none;
      padding: 0 6px;
      cursor:pointer;
    }
    option{ color:#000; }

    /* Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØµÙØ­Ø© */
    .input{
      width:100%;
      border:none;
      outline:none;
      background: var(--input);
      padding: 18px 16px;
      border-radius: 22px;
      font-size: 24px;
      font-weight: 800;
      text-align: right;
      color:#111827;
      box-shadow: inset 0 2px 0 rgba(0,0,0,.06);
    }

    .btn{
      width:100%;
      margin-top: 14px;
      border:none;
      outline:none;
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      color: white;
      padding: 18px 16px;
      border-radius: 24px;
      font-size: 30px;
      font-weight: 900;
      cursor:pointer;
      box-shadow: 0 18px 45px rgba(63,102,255,.35);
      transition: transform .06s ease;
    }
    .btn:active{ transform: scale(.99); }

    .result{
      text-align:center;
      margin-top: 18px;
      color: #a9c5ff;
      font-size: clamp(22px, 3.6vw, 34px);
      line-height: 1.9;
      font-weight: 900;
    }
    .result b{ color:#dbe8ff; }

    .note{
      margin-top: 10px;
      text-align:center;
      color: rgba(255,255,255,.55);
      font-size: 14px;
    }

    /* Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… */
    .duaCard{
      margin-top: 16px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 22px;
      padding: 18px 14px;
      text-align:center;
    }
    .duaTitle{
      font-size: 22px;
      font-weight: 900;
      margin: 0 0 10px;
      color: #e9f1ff;
    }
    .duaText{
      margin:0;
      font-size: 20px;
      line-height: 1.9;
      color: rgba(255,255,255,.90);
      font-weight: 700;
    }

    /* ÙŠÙˆØªÙŠÙˆØ¨ */
    .ytCard{
      margin-top: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 22px;
      padding: 16px 14px 18px;
      text-align:center;
    }
    .ytTitle{
      margin:0 0 12px;
      font-size: 20px;
      font-weight: 900;
      color:#e9f1ff;
    }
    .ytWrap{
      width:100%;
      aspect-ratio: 16 / 9;
      border-radius: 18px;
      overflow:hidden;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.08);
    }
    iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }

    .footer{
      margin-top: 16px;
      text-align:center;
      color: rgba(255,255,255,.55);
      font-size: 14px;
      font-weight: 700;
    }

    @media (max-width: 420px){
      .pill{ padding: 9px 10px; }
      select{ font-size: 15px; }
      .btn{ font-size: 28px; }
      .input{ font-size: 22px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
  <div class="card">

<!-- ğŸ‘‡ Ø§Ù„ØµÙ‚Ù‡ Ù‡Ù†Ø§ -->
<div style="margin-bottom:15px;">
  <select id="pageSelect" onchange="switchPage()" 
    style="width:100%; padding:14px; border-radius:18px; font-size:18px; font-weight:700;">
    <option value="quran">ğŸ“– Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</option>
    <option value="calendar">ğŸ‡¸ğŸ‡¦ ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
  </select>
</div>
<div id="quranPage">
      <div class="title">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† <span class="emoji">ğŸ“–</span></div>
      <div class="sub" id="hijriDate">â€”</div>
      <div class="time" id="clock">â€”</div>

      <hr class="sep">

      <div class="sectionTitle">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</div>

      <div class="modeBox">
        <div class="modeRow active" id="rowMonth" onclick="setMode('month')">
          <div class="modeLeft">
            <div class="radio"><div class="dot"></div></div>
            <div class="modeText">
              <b>Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ)</b>
              <small>ÙŠØ­Ø³Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</small>
            </div>
          </div>
          <div class="pill">ğŸ“…</div>
        </div>

        <div class="modeRow" id="rowDays" onclick="setMode('days')">
          <div class="modeLeft">
            <div class="radio"><div class="dot"></div></div>
            <div class="modeText">
              <b>Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…</b>
              <small>Ø§Ø®ØªØ± 15 Ø£Ùˆ 30 Ø£Ùˆ 60 ÙŠÙˆÙ…</small>
            </div>
          </div>
          <div class="pill">
            â³
            <select id="daysSelect" onchange="refreshModeUI()">
              <option value="15">15 ÙŠÙˆÙ…</option>
              <option value="30" selected>30 ÙŠÙˆÙ…</option>
              <option value="60">60 ÙŠÙˆÙ…</option>
            </select>
          </div>
        </div>
      </div>

      <input class="input" id="currentPage" inputmode="numeric" placeholder="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù„ÙŠ ÙˆØµÙ„Øª Ù„Ù‡Ø§" />

      <button class="btn" id="calcBtn">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©</button>

      <div class="result" id="result"></div>
      <div class="note">Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØ¹ØªÙ…Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ®/ÙˆÙ‚Øª Ø¬Ù‡Ø§Ø²Ùƒ.</div>

      <div class="duaCard">
        <div class="duaTitle">Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…</div>
        <p class="duaText" id="duaText">â€”</p>
      </div>

      <div class="ytCard">
        <div class="ytTitle">Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
        <div class="ytWrap">
          <iframe
            id="ytFrame"
            title="YouTube Live"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
          ></iframe>
        </div>
      </div>

      <div class="footer">Ù…Ø¹ ØªØ­ÙŠØ§Øª: Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø±Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø¯Ø¨Ù„Ù‡ ğŸ”¥ğŸ’»</div>
    </div>
  </div>

  <script>
    // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© =====
    const TOTAL_PAGES = 604;
    let mode = "month"; // month | days

    // Ø±Ø§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ (Ø£Ù†Øª Ø£Ø¹Ø·ÙŠØªÙ†ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø·)
    const YT_URL = "https://www.youtube.com/live/Cm1v4bteXbI?si=K5IIII-EJ8R4HQEb";

    // ===== Ø§Ø³ØªØ®Ø±Ø§Ø¬ YouTube Video ID Ø¨Ø´ÙƒÙ„ Ù…Ø¶Ø¨ÙˆØ· =====
    function extractYouTubeId(url){
      try{
        const u = new URL(url);
        // live/VIDEOID
        const liveMatch = u.pathname.match(/\/live\/([^\/]+)/);
        if(liveMatch && liveMatch[1]) return liveMatch[1];

        // watch?v=VIDEOID
        const v = u.searchParams.get("v");
        if(v) return v;

        // youtu.be/VIDEOID
        if(u.hostname.includes("youtu.be")){
          return u.pathname.replace("/","").trim();
        }
      }catch(e){}
      return null;
    }

    function setYouTubeEmbed(){
      const id = extractYouTubeId(YT_URL);
      const frame = document.getElementById("ytFrame");
      if(!id){
        frame.src = "about:blank";
        return;
      }
      // embed
      frame.src = `https://www.youtube.com/embed/${id}`;
    }

    // ===== Ø§Ù„ØªØ§Ø±ÙŠØ®/Ø§Ù„ÙˆÙ‚Øª =====
    function updateDateTime(){
      const now = new Date();

      // ÙˆÙ‚Øª
      const timeStr = new Intl.DateTimeFormat("ar-SA", {
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit"
      }).format(now);

      document.getElementById("clock").textContent = `â° ${timeStr}`;

      // ØªØ§Ø±ÙŠØ® Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)
      // Ù‚Ø¯ Ù„Ø§ ÙŠØ¯Ø¹Ù…Ù‡Ø§ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©ØŒ Ù„Ø°Ù„Ùƒ Ù†Ø³ØªØ®Ø¯Ù… fallbacks.
      let hijriText = "";
      try{
        hijriText = new Intl.DateTimeFormat("ar-SA-u-ca-islamic-umalqura", {
          weekday: "long",
          day: "numeric",
          month: "long",
          year: "numeric"
        }).format(now);
      }catch(e){
        // fallback (islamic Ø¹Ø§Ù…)
        hijriText = new Intl.DateTimeFormat("ar-SA-u-ca-islamic", {
          weekday: "long",
          day: "numeric",
          month: "long",
          year: "numeric"
        }).format(now);
      }

      document.getElementById("hijriDate").textContent = `ğŸ“… ${hijriText}`;
    }

    // ===== Ø­Ø³Ø§Ø¨ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©) =====
    function getHijriInfo(){
      const now = new Date();
      // Ù†Ø³ØªØ®Ø¯Ù… en-TN Ù„Ø£Ù†Ù‡ Ù…Ù…ØªØ§Ø² Ø¨Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø±Ù‚Ù…ÙŠ day/month/year
      let formatter;
      try{
        formatter = new Intl.DateTimeFormat('en-TN-u-ca-islamic-umalqura', {
          day: 'numeric', month: 'numeric', year: 'numeric'
        });
      }catch(e){
        formatter = new Intl.DateTimeFormat('en-TN-u-ca-islamic', {
          day: 'numeric', month: 'numeric', year: 'numeric'
        });
      }

      const parts = formatter.formatToParts(now);
      const day = parseInt(parts.find(p => p.type === 'day')?.value || "NaN", 10);
      const month = parseInt(parts.find(p => p.type === 'month')?.value || "NaN", 10);
      const year = parseInt(parts.find(p => p.type === 'year')?.value || "NaN", 10);

      return { day, month, year, ok: Number.isFinite(day) && Number.isFinite(month) && Number.isFinite(year) };
    }

    // ØªÙ‚Ø¯ÙŠØ± Ø·ÙˆÙ„ Ø§Ù„Ø´Ù‡Ø± (29/30) â€” Ø¨Ø¯ÙˆÙ† API Ø®Ø§Ø±Ø¬ÙŠ
    // Ø¥Ø°Ø§ ØªØ¨ÙŠ Ø¯Ù‚Ø© 100% (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ) Ù†Ù‚ÙˆÙ„ Ù„ÙŠ ÙˆØ£Ø±Ø¨Ø·Ù‡ API.
    function getHijriMonthLength(month, year){
      // Ù‚Ø§Ø¹Ø¯Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø´Ø§Ø¦Ø¹Ø©: Ø§Ù„ÙØ±Ø¯ÙŠ 30 ÙˆØ§Ù„Ø²ÙˆØ¬ÙŠ 29
      // (ÙŠÙƒÙÙŠ Ù„ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡ NaN)
      return (month % 2 === 1) ? 30 : 29;
    }

    function getDaysRemainingInHijriMonthInclusive(){
      const h = getHijriInfo();
      if(!h.ok) return null;

      const monthLen = getHijriMonthLength(h.month, h.year);
      const remaining = monthLen - h.day + 1; // Ø´Ø§Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…
      if(!Number.isFinite(remaining) || remaining < 1) return null;
      return remaining;
    }

    // ===== Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… (ÙŠØªØºÙŠØ± ÙŠÙˆÙ…ÙŠÙ‹Ø§) =====
    const DUAS = [
      "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø°ÙŠÙ† Ù‡Ù… Ø£Ù‡Ù„Ùƒ ÙˆØ®Ø§ØµØªÙƒØŒ ÙˆØ§Ø±ÙØ¹Ù†Ø§ Ø¨Ù‡ Ø¯Ø±Ø¬Ø§Øª.",
      "Ø§Ù„Ù„Ù‡Ù… Ø§ÙØªØ­ Ù„Ù†Ø§ Ø£Ø¨ÙˆØ§Ø¨ Ø±Ø­Ù…ØªÙƒØŒ ÙˆØ§ØºÙØ± Ù„Ù†Ø§ Ø°Ù†ÙˆØ¨Ù†Ø§ØŒ ÙˆØ§Ù‡Ø¯Ù†Ø§ Ù„Ø£Ø­Ø³Ù† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„.",
      "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†Ù‘Ø§ Ø¹Ù„Ù‰ Ø°ÙƒØ±Ùƒ ÙˆØ´ÙƒØ±Ùƒ ÙˆØ­Ø³Ù† Ø¹Ø¨Ø§Ø¯ØªÙƒ.",
      "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙÙŠ Ø§Ù„Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø¹Ù…Ù„ØŒ ÙˆØ«Ø¨Ù‘ØªÙ†Ø§ Ø¹Ù„Ù‰ Ø·Ø§Ø¹ØªÙƒ.",
      "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ù‚Ù„ÙˆØ¨Ù†Ø§ ÙˆÙ†ÙˆØ± ØµØ¯ÙˆØ±Ù†Ø§ ÙˆØ¬Ù„Ø§Ø¡ Ø£Ø­Ø²Ø§Ù†Ù†Ø§.",
      "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù„Ù†Ø§ Ù…Ù† ÙƒÙ„ Ù‡Ù…ÙÙ‘ ÙØ±Ø¬Ù‹Ø§ ÙˆÙ…Ù† ÙƒÙ„ Ø¶ÙŠÙ‚Ù Ù…Ø®Ø±Ø¬Ù‹Ø§.",
      "Ø§Ù„Ù„Ù‡Ù… ÙˆÙÙ‘Ù‚Ù†Ø§ Ù„Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„ ÙˆØªÙ„Ø§ÙˆØ© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¢Ù†Ø§Ø¡ Ø§Ù„Ù„ÙŠÙ„ ÙˆØ£Ø·Ø±Ø§Ù Ø§Ù„Ù†Ù‡Ø§Ø±.",
      "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ Ø­Ø³Ù† Ø§Ù„Ø®Ø§ØªÙ…Ø© ÙˆØ§ØºÙØ± Ù„Ù†Ø§ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠÙ†Ø§ ÙˆÙ„Ù„Ù…Ø³Ù„Ù…ÙŠÙ†."
    ];

    function dayKeyLocal(){
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const da = String(d.getDate()).padStart(2,'0');
      return `${y}-${m}-${da}`;
    }

    function updateDailyDua(){
      const key = dayKeyLocal();
      // hash Ø¨Ø³ÙŠØ·
      let h = 0;
      for (let i=0;i<key.length;i++) h = (h*31 + key.charCodeAt(i)) >>> 0;
      const idx = h % DUAS.length;
      document.getElementById("duaText").textContent = DUAS[idx];
    }

    // ===== UI Ù„Ù„Ù…ÙˆØ¯ =====
    function setMode(m){
      mode = m;
      refreshModeUI();
    }

    function refreshModeUI(){
      const rowMonth = document.getElementById("rowMonth");
      const rowDays = document.getElementById("rowDays");
      rowMonth.classList.toggle("active", mode === "month");
      rowDays.classList.toggle("active", mode === "days");

      // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ select
      document.getElementById("daysSelect").disabled = (mode !== "days");
      document.getElementById("daysSelect").style.opacity = (mode !== "days") ? "0.5" : "1";
    }

    // ===== Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ =====
    function calculatePlan(){
      const current = parseInt(document.getElementById("currentPage").value, 10);

      if(!Number.isFinite(current) || current < 1 || current > TOTAL_PAGES){
        document.getElementById("result").innerHTML =
          "âš ï¸ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµÙØ­Ø© ØµØ­ÙŠØ­ Ø¨ÙŠÙ† <b>1</b> Ùˆ <b>604</b>.";
        return;
      }

      const remainingPages = TOTAL_PAGES - current;

      // Ø§Ù„Ø£ÙŠØ§Ù… Ø­Ø³Ø¨ Ø§Ù„ÙˆØ¶Ø¹
      let days = null;

      if(mode === "days"){
        days = parseInt(document.getElementById("daysSelect").value, 10);
      }else{
        days = getDaysRemainingInHijriMonthInclusive();
      }

      if(!Number.isFinite(days) || days === null || days < 1){
        document.getElementById("result").innerHTML =
          "âš ï¸ ØªØ¹Ø°Ø± Ø­Ø³Ø§Ø¨ Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².<br><span style='font-size:16px;color:rgba(255,255,255,.55)'>Ø§Ø®ØªØ± (Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…) ÙƒØ­Ù„ Ø¨Ø¯ÙŠÙ„.</span>";
        return;
      }

      // ØµÙØ­Ø§Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§ (Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ù„Ù„Ø£Ø¹Ù„Ù‰)
      const perDay = Math.ceil(remainingPages / days);

      const daysLabel = (mode === "days") ? `Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: <b>${days}</b>` : `Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: <b>${days}</b> (Ù‡Ø¬Ø±ÙŠ)`;

      document.getElementById("result").innerHTML = `
        <div>ğŸ“˜ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <b>${remainingPages}</b></div>
        <div>ğŸ“… ${daysLabel}</div>
        <div>ğŸ“– Ø§Ù‚Ø±Ø£ ÙŠÙˆÙ…ÙŠÙ‹Ø§: <b>${perDay}</b> ØµÙØ­Ø©</div>
        <div>âœ… Ù„ØªØ®ØªÙ… Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ø©</div>
      `;
    }

    // ===== Ø£Ø­Ø¯Ø§Ø« =====
    document.getElementById("calcBtn").addEventListener("click", calculatePlan);
    document.getElementById("currentPage").addEventListener("keydown", (e)=>{
      if(e.key === "Enter") calculatePlan();
    });

    // ===== ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ =====
    refreshModeUI();
    updateDateTime();
    updateDailyDua();
    setYouTubeEmbed();

    setInterval(updateDateTime, 1000);

    // ÙŠØ­Ø¯Ø« Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø¥Ø°Ø§ ØªØºÙŠØ± Ø§Ù„ÙŠÙˆÙ…
    setInterval(updateDailyDua, 60 * 1000);
    </div>
  </script>
</body>
</html>
