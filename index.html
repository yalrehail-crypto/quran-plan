<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</title>
  <style>
    body{
      font-family: system-ui, -apple-system, Segoe UI, Tahoma, Arial;
      background:#0b1220;
      color:#fff;
      margin:0;
      padding:20px;
      text-align:center;
    }
    .card{
      max-width:520px;
      margin:0 auto;
      background:linear-gradient(180deg, #111b33 0%, #0d152a 100%);
      border-radius:28px;
      padding:26px 18px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }
    h1{
      margin:0 0 10px;
      font-size:44px;
      letter-spacing:.5px;
    }
    .muted{
      color:#cbd5e1;
      font-size:18px;
      line-height:1.8;
    }
    hr{
      border:none;
      height:1px;
      background:rgba(255,255,255,.12);
      margin:16px 0 18px;
    }

    .section-title{
      font-size:18px;
      color:#cbd5e1;
      margin:6px 0 10px;
    }

    .options{
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      margin-bottom:14px;
    }
    .opt-row{
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    label{
      font-size:18px;
      color:#e5e7eb;
    }
    input[type="radio"]{
      transform:scale(1.15);
      accent-color:#3b82f6;
    }

    select, input[type="number"]{
      width:100%;
      max-width:480px;
      border:none;
      outline:none;
      padding:18px 16px;
      border-radius:18px;
      font-size:24px;
      text-align:right;
      background:#fff;
      color:#0b1220;
      box-sizing:border-box;
    }
    button{
      width:100%;
      max-width:480px;
      border:none;
      outline:none;
      padding:18px 16px;
      border-radius:18px;
      font-size:28px;
      background:#3b82f6;
      color:#fff;
      margin-top:12px;
      cursor:pointer;
      box-shadow: 0 10px 25px rgba(59,130,246,.35);
    }
    button:active{ transform:scale(.995); }

    .result{
      margin-top:18px;
      font-size:30px;
      color:#93c5fd;
      line-height:1.7;
      min-height:40px;
      white-space:pre-line;
    }

    .dua-box{
      margin-top:18px;
      padding:14px 14px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      text-align:right;
    }
    .dua-title{
      color:#cbd5e1;
      font-size:16px;
      margin-bottom:8px;
      text-align:center;
    }
    .dua-text{
      font-size:18px;
      line-height:1.9;
      color:#f8fafc;
    }

    .footer{
      margin-top:18px;
      color:rgba(255,255,255,.55);
      font-size:14px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† ğŸ“–</h1>

    <div class="muted">
      <div id="hijriDate">â€”</div>
      <div id="clock">â€”</div>
    </div>

    <hr/>

    <div class="section-title">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</div>

    <div class="options">
      <div class="opt-row">
        <input type="radio" name="mode" id="modeMonth" value="month" checked>
        <label for="modeMonth">Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ)</label>
      </div>

      <div class="opt-row">
        <input type="radio" name="mode" id="modeDays" value="days">
        <label for="modeDays">Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…</label>

        <select id="daysSelect" disabled>
          <option value="60">60 ÙŠÙˆÙ…</option>
          <option value="30" selected>30 ÙŠÙˆÙ…</option>
          <option value="15">15 ÙŠÙˆÙ…</option>
        </select>
      </div>
    </div>

    <input id="currentPage" type="number" min="1" max="604" placeholder="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù„ÙŠ ÙˆØµÙ„Øª Ù„Ù‡Ø§ (1 - 604)">

    <button onclick="calculatePlan()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©</button>

    <div class="result" id="result"></div>

    <div class="dua-box">
      <div class="dua-title">Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… (ÙŠØªØºÙŠØ± ÙŠÙˆÙ…ÙŠÙ‹Ø§)</div>
      <div class="dua-text" id="duaText">â€”</div>
    </div>

    <hr style="margin-top:18px;"/>

    <div class="footer">ğŸ”¥ğŸ’» Ù…Ø¹ ØªØ­ÙŠØ§Øª: Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø±Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø¯Ø¨Ù„Ù‡</div>
  </div>

<script>
  // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© =====
  const TOTAL_PAGES = 604;
  const LOCALE_AR = "ar-SA"; // ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù‡Ø¬Ø±ÙŠ ØºØ§Ù„Ø¨Ø§Ù‹ Ø¹Ù„Ù‰ Ø£ØºÙ„Ø¨ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
  const TIME_ZONE = "Asia/Riyadh";

  // ===== Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ + Ø§Ù„ÙˆÙ‚Øª (ÙŠØªØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹) =====
  function updateDateTime(){
    const now = new Date();

    // ØªØ§Ø±ÙŠØ® Ù‡Ø¬Ø±ÙŠ
    const hijri = new Intl.DateTimeFormat(LOCALE_AR + "-u-ca-islamic", {
      weekday: "long",
      day: "numeric",
      month: "long",
      year: "numeric",
      timeZone: TIME_ZONE
    }).format(now);

    // ÙˆÙ‚Øª
    const time = new Intl.DateTimeFormat(LOCALE_AR, {
      hour: "numeric",
      minute: "2-digit",
      second: "2-digit",
      hour12: true,
      timeZone: TIME_ZONE
    }).format(now);

    document.getElementById("hijriDate").textContent = "ğŸ“… " + hijri;
    document.getElementById("clock").textContent = "â° " + time;
  }

  updateDateTime();
  setInterval(updateDateTime, 1000);

  // ===== Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ…ÙŠ (Ø¨Ø¯ÙˆÙ† API - Ø«Ø§Ø¨Øª ÙˆØ¢Ù…Ù†) =====
  const DUAS = [
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ù‚Ù„ÙˆØ¨Ù†Ø§ØŒ ÙˆÙ†ÙˆØ± ØµØ¯ÙˆØ±Ù†Ø§ØŒ ÙˆØ¬Ù„Ø§Ø¡ Ø£Ø­Ø²Ø§Ù†Ù†Ø§ØŒ ÙˆØ°Ù‡Ø§Ø¨ Ù‡Ù…ÙˆÙ…Ù†Ø§.",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†Ù‘Ø§ Ø¹Ù„Ù‰ Ø°ÙƒØ±Ùƒ ÙˆØ´ÙƒØ±Ùƒ ÙˆØ­Ø³Ù† Ø¹Ø¨Ø§Ø¯ØªÙƒØŒ ÙˆØ«Ø¨Ù‘Øª Ù‚Ù„ÙˆØ¨Ù†Ø§ Ø¹Ù„Ù‰ Ø·Ø§Ø¹ØªÙƒ.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ ØªÙ„Ø§ÙˆØ© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø¢Ù†Ø§Ø¡ Ø§Ù„Ù„ÙŠÙ„ ÙˆØ£Ø·Ø±Ø§Ù Ø§Ù„Ù†Ù‡Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø°ÙŠ ÙŠØ±Ø¶ÙŠÙƒ Ø¹Ù†Ø§.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù„Ù†Ø§ Ù…Ù† ÙƒÙ„ Ù‡Ù…Ù ÙØ±Ø¬Ù‹Ø§ ÙˆÙ…Ù† ÙƒÙ„ Ø¶ÙŠÙ‚Ù Ù…Ø®Ø±Ø¬Ù‹Ø§ ÙˆØ§Ø±Ø²Ù‚Ù†Ø§ Ù…Ù† Ø­ÙŠØ« Ù„Ø§ Ù†Ø­ØªØ³Ø¨.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù†Ø§ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠÙ†Ø§ ÙˆÙ„Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ù„Ù…Ø§Øª Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ Ù…Ù†Ù‡Ù… ÙˆØ§Ù„Ø£Ù…ÙˆØ§Øª.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†Ø§ Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙÙŠ Ø§Ù„Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø¹Ù…Ù„ØŒ ÙˆØ¨Ø§Ø±Ùƒ Ù„Ù†Ø§ ÙÙŠ Ø£ÙˆÙ‚Ø§ØªÙ†Ø§ ÙˆØ£Ø¹Ù…Ø§Ø±Ù†Ø§.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø°ÙŠÙ† Ù‡Ù… Ø£Ù‡Ù„Ùƒ ÙˆØ®Ø§ØµØªÙƒØŒ ÙˆØ§Ø±ÙØ¹Ù†Ø§ Ø¨Ù‡ Ø¯Ø±Ø¬Ø§Øª.",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ø®ÙŠØ±Ù‹Ø§ Ù„Ù†Ø§ØŒ ÙˆØ§ÙƒØªØ¨ Ù„Ù†Ø§ ÙÙŠÙ‡ Ù‚Ø¨ÙˆÙ„Ù‹Ø§ ÙˆØªÙˆÙÙŠÙ‚Ù‹Ø§ ÙˆØ±Ø­Ù…Ø©."
  ];

  function getDailyIndex(){
    // Ù†ÙØ³ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø·ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ… ÙˆÙŠØªØºÙŠØ± Ù…Ø¹ ØªØºÙŠÙ‘Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® (UTC)
    const d = new Date();
    const key = `${d.getUTCFullYear()}-${d.getUTCMonth()+1}-${d.getUTCDate()}`;
    let hash = 0;
    for (let i=0; i<key.length; i++) hash = (hash*31 + key.charCodeAt(i)) >>> 0;
    return hash % DUAS.length;
  }

  function updateDua(){
    document.getElementById("duaText").textContent = DUAS[getDailyIndex()];
  }
  updateDua();

  // ===== Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ =====
  function getHijriParts(date){
    // Ù†Ø£Ø®Ø° Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ© Ø¹Ø¨Ø± formatToParts
    const parts = new Intl.DateTimeFormat(LOCALE_AR + "-u-ca-islamic", {
      day: "numeric",
      month: "numeric",
      year: "numeric",
      timeZone: TIME_ZONE
    }).formatToParts(date);

    const get = (type) => {
      const p = parts.find(x => x.type === type);
      return p ? parseInt(p.value, 10) : NaN;
    };

    return {
      hDay: get("day"),
      hMonth: get("month"),
      hYear: get("year")
    };
  }

  function daysInHijriMonth(year, month){
    // Ù†Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù‚ÙˆÙŠØ©:
    // Ù†Ø¬ÙŠØ¨ Ø£ÙˆÙ„ ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‚Ø§Ø¯Ù… Ù‡Ø¬Ø±ÙŠØ§Ù‹ ÙˆØ£ÙˆÙ„ ÙŠÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± (Ø¨Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ)
    // ÙˆÙ†Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ†Ù‡Ù… Ø¨Ø§Ù„Ø£ÙŠØ§Ù….
    // Ø¨Ù…Ø§ Ø£Ù† ØªØ­ÙˆÙŠÙ„ Ù‡Ø¬Ø±ÙŠ->Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ù…Ø¨Ø§Ø´Ø± Ù…Ùˆ Ù…ØªØ§Ø­ Ø¨ÙƒÙ„ Ø§Ù„Ù…ØªØµÙØ­Ø§ØªØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø·Ø±ÙŠÙ‚Ø© Ø¹Ù…Ù„ÙŠØ©:
    // Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆÙ†Ù…Ø´ÙŠ Ù„Ù„Ø£Ù…Ø§Ù… Ø­ØªÙ‰ ÙŠØªØºÙŠØ± Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ.

    const start = new Date();
    const { hMonth } = getHijriParts(start);

    let count = 0;
    let probe = new Date(start);
    // Ù†Ø±Ø¬Ø¹ Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙŠÙˆÙ… (ØªÙ‚Ù„ÙŠÙ„ Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø§Ù„ÙˆÙ‚Øª)
    probe.setHours(12,0,0,0);

    // Ù†ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ù…Ø§Ù… Ø­ØªÙ‰ ÙŠØªØºÙŠØ± Ø§Ù„Ø´Ù‡Ø±
    while (true){
      count++;
      probe.setDate(probe.getDate() + 1);
      const p = getHijriParts(probe);
      if (p.hMonth !== hMonth) break;

      // Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø­Ù„Ù‚Ø§Øª Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ©
      if (count > 35) break;
    }

    // Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ù…Ù† "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ" Ø¥Ù„Ù‰ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø± + ÙŠÙˆÙ… Ø§Ù„ÙŠÙˆÙ… Ù†ÙØ³Ù‡ØŸ
    // Ù‡Ù†Ø§ Ù†Ø­ØªØ§Ø¬ Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø± ÙƒØ§Ù…Ù„ØŒ Ù†Ù‚Ø¯Ø± Ù†Ø³ØªØ®Ø±Ø¬:
    // Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© = Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø­ØªÙ‰ ÙŠØªØºÙŠØ± Ø§Ù„Ø´Ù‡Ø± (count)
    // Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ = hDayØŒ Ø¥Ø°Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ù‡Ø± = (hDay - 1) + count
    const todayParts = getHijriParts(start);
    const total = (todayParts.hDay - 1) + count;
    return total;
  }

  function remainingDaysInHijriMonth(){
    const now = new Date();
    const partsNow = getHijriParts(now);
    const total = daysInHijriMonth(partsNow.hYear, partsNow.hMonth);
    const remaining = total - partsNow.hDay + 1; // Ø´Ø§Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…
    return { remaining, total, today: partsNow.hDay };
  }

  // ===== ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙŠØ§Ù… =====
  const modeMonth = document.getElementById("modeMonth");
  const modeDays  = document.getElementById("modeDays");
  const daysSelect = document.getElementById("daysSelect");

  function syncModeUI(){
    daysSelect.disabled = !modeDays.checked;
  }
  modeMonth.addEventListener("change", syncModeUI);
  modeDays.addEventListener("change", syncModeUI);
  syncModeUI();

  // ===== Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ =====
  function calculatePlan(){
    const current = parseInt(document.getElementById("currentPage").value, 10);
    const resultEl = document.getElementById("result");

    if (isNaN(current) || current < 1 || current > TOTAL_PAGES){
      resultEl.textContent = `âŒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµÙØ­Ø© ØµØ­ÙŠØ­ Ø¨ÙŠÙ† 1 Ùˆ ${TOTAL_PAGES}`;
      return;
    }

    const remainingPages = TOTAL_PAGES - current;

    let days;
    if (modeMonth.checked){
      const info = remainingDaysInHijriMonth();
      days = info.remaining;

      // Ù„Ùˆ ÙƒØ§Ù† Ø¨Ø§Ù‚ÙŠ 0 (Ù†Ø§Ø¯Ø±) Ù†Ø®Ù„ÙŠÙ‡ 1
      if (!days || days < 1) days = 1;

      const perDay = Math.ceil(remainingPages / days);

      resultEl.textContent =
        `ğŸ“˜ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${remainingPages}\n` +
        `ğŸ“… Ø£ÙŠØ§Ù… Ù…ØªØ¨Ù‚ÙŠØ© Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${days}\n` +
        `ğŸ“– Ø§Ù‚Ø±Ø£ ÙŠÙˆÙ…ÙŠÙ‹Ø§: ${perDay} ØµÙØ­Ø©\n` +
        `âœ… Ù„ØªØ®ØªÙ… Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‡Ø¬Ø±ÙŠ`;
    } else {
      days = parseInt(daysSelect.value, 10);
      if (!days || days < 1) days = 1;

      const perDay = Math.ceil(remainingPages / days);

      resultEl.textContent =
        `ğŸ“˜ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${remainingPages}\n` +
        `ğŸ—“ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: ${days}\n` +
        `ğŸ“– Ø§Ù‚Ø±Ø£ ÙŠÙˆÙ…ÙŠÙ‹Ø§: ${perDay} ØµÙØ­Ø©\n` +
        `âœ… Ù„ØªØ®ØªÙ… Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ø©`;
    }
  }
</script>
</body>
</html>
