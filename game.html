<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù„Ø¹Ø¨Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ© 3D</title>

  <!-- Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ø¬Ù…ÙŠÙ„ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#07162d;
      --bg2:#081c3b;
      --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --txt:#fff;
      --gold:#f7d16a;
      --blue:#3f66ff;
      --shadow: 0 24px 70px rgba(0,0,0,.45);
      --radius: 26px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Tajawal", system-ui, -apple-system, Segoe UI, Arial;
      background: radial-gradient(1200px 700px at 50% -10%, #15315d 0%, var(--bg1) 45%, #050d1a 100%);
      color:var(--txt);
      overflow:hidden;
    }

    /* Canvas 3D */
    #stage{
      position:fixed; inset:0;
      width:100%; height:100%;
      display:block;
    }

    /* Ø·Ø¨Ù‚Ø© Ø²Ø¬Ø§Ø¬ÙŠØ© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© */
    .ui{
      position:fixed;
      inset:0;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      pointer-events:none;
      padding:18px 14px;
    }
    .panel{
      pointer-events:auto;
      width:min(900px, 96vw);
      margin-top:10px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }

    /* Ø²Ø®Ø±ÙØ© Ø£Ø¹Ù„Ù‰ */
    .panel::before{
      content:"";
      position:absolute; inset:-2px -2px auto -2px;
      height:120px;
      background:
        radial-gradient(450px 130px at 15% 40%, rgba(247,209,106,.25), transparent 60%),
        radial-gradient(520px 140px at 85% 30%, rgba(63,102,255,.22), transparent 60%),
        linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom:1px solid rgba(255,255,255,.09);
    }

    .top{
      position:relative;
      padding:22px 18px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .badge{
      width:44px; height:44px;
      border-radius:14px;
      background: radial-gradient(circle at 30% 30%, rgba(247,209,106,.95), rgba(247,209,106,.18) 60%, rgba(255,255,255,.08) 100%);
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 12px 30px rgba(247,209,106,.12);
      display:grid;
      place-items:center;
      font-size:22px;
    }
    .brand h1{
      margin:0;
      font-size:20px;
      font-weight:800;
      letter-spacing:.2px;
      display:flex;
      gap:8px;
      align-items:center;
      white-space:nowrap;
    }
    .brand h1 span{
      color:var(--gold);
      text-shadow: 0 10px 30px rgba(247,209,106,.22);
    }
    .sub{
      margin:0;
      opacity:.8;
      font-size:13px;
      line-height:1.6;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btn{
      border:1px solid rgba(255,255,255,.15);
      background: rgba(255,255,255,.06);
      color:#fff;
      padding:10px 14px;
      border-radius: 16px;
      font-weight:700;
      cursor:pointer;
      transition:.18s ease;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(247,209,106,.95), rgba(247,209,106,.35));
      color:#1b1a12;
      border:1px solid rgba(247,209,106,.45);
    }
    .btn.primary:hover{ background: linear-gradient(135deg, rgba(247,209,106,1), rgba(247,209,106,.45)); }

    .content{
      position:relative;
      padding:14px 18px 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    @media (max-width: 860px){
      .content{ grid-template-columns:1fr; }
      .actions{ justify-content:flex-start; }
    }

    .card{
      border-radius: 22px;
      background: rgba(10, 18, 34, .35);
      border:1px solid rgba(255,255,255,.10);
      padding:14px;
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
    }

    .titleRow{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:10px;
    }
    .titleRow h2{
      margin:0;
      font-size:16px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .hint{
      font-size:12px;
      opacity:.75;
    }

    .stats{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 520px){
      .stats{ grid-template-columns:1fr; }
    }
    .stat{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      padding:12px;
    }
    .stat .k{ font-size:12px; opacity:.78; margin-bottom:4px; }
    .stat .v{ font-size:18px; font-weight:800; }

    .instructions{
      display:flex;
      flex-direction:column;
      gap:10px;
      font-size:14px;
      line-height:1.75;
      opacity:.92;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border-radius:999px;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
    }
    .kbd{
      font-weight:800;
      padding:2px 8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.25);
    }

    /* Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ */
    .footer{
      position:relative;
      padding:12px 18px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-top:1px solid rgba(255,255,255,.08);
      opacity:.92;
      font-size:13px;
    }
    .footer a{ color: var(--gold); text-decoration:none; font-weight:800; }
    .footer a:hover{ text-decoration:underline; }

    /* Ø±Ø³Ø§Ù„Ø© ØµØºÙŠØ±Ø© */
    #toast{
      position:fixed;
      left:50%;
      bottom:16px;
      transform:translateX(-50%);
      background: rgba(0,0,0,.5);
      border:1px solid rgba(255,255,255,.14);
      color:#fff;
      padding:10px 12px;
      border-radius: 14px;
      font-size:13px;
      opacity:0;
      transition:.25s ease;
      pointer-events:none;
      backdrop-filter: blur(10px);
    }
    #toast.show{ opacity:1; }
  </style>
</head>

<body>
  <canvas id="stage"></canvas>

  <div class="ui">
    <div class="panel">
      <div class="top">
        <div class="brand">
          <div class="badge">ğŸ•Œ</div>
          <div>
            <h1>Ù„Ø¹Ø¨Ø© Ø±Ù…Ø¶Ø§Ù†ÙŠØ© <span>3D</span></h1>
            <p class="sub">Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù†Ø¬ÙˆÙ… âœ¨ â€” ÙƒÙ„ Ù†Ø¬Ù…Ø© ØªØ¶ÙŠÙ Ù„Ùƒ Ù†Ù‚Ø§Ø·. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ù…Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªØ¸Ù‡Ø±.</p>
          </div>
        </div>

        <div class="actions">
          <button class="btn" id="backBtn">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
          <button class="btn" id="resetBtn">ğŸ”„ ØªØµÙÙŠØ±</button>
          <button class="btn primary" id="startBtn">ğŸš€ Ø§Ø¨Ø¯Ø£</button>
        </div>
      </div>

      <div class="content">
        <div class="card">
          <div class="titleRow">
            <h2>Ø§Ù„Ù…Ù‡Ù…Ø©</h2>
            <div class="hint">ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</div>
          </div>

          <div class="instructions">
            <div class="pill">ğŸ‘† <b>Ø¨Ø§Ù„Ø¬ÙˆØ§Ù„:</b> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ù…Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªÙ„Ù…Ø¹</div>
            <div class="pill">ğŸ–±ï¸ <b>Ø¨Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:</b> Ø§Ø¶ØºØ· Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ù…Ø© (Ø£Ùˆ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©)</div>
            <div class="pill">âŒ¨ï¸ <b>Ø§Ø®ØªÙŠØ§Ø±ÙŠ:</b> <span class="kbd">Space</span> Ù„Ø¥Ø·Ù„Ø§Ù‚ â€œÙˆÙ…ÙŠØ¶â€ ÙŠØ²ÙŠØ¯ Ø§Ù„ÙˆÙ‡Ø¬</div>
            <div class="pill">â­ Ø§Ù„Ù†Ø¬Ù…Ø© ØªØ¸Ù‡Ø± ÙˆØªØªØ­Ø±Ùƒâ€¦ Ø§Ù„ØªÙ‚Ø·Ù‡Ø§ Ù‚Ø¨Ù„ Ø£Ù† ØªØ®ØªÙÙŠ</div>
          </div>

          <div class="stats">
            <div class="stat">
              <div class="k">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
              <div class="v" id="score">0</div>
            </div>
            <div class="stat">
              <div class="k">Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©</div>
              <div class="v" id="best">0</div>
            </div>
            <div class="stat">
              <div class="k">Ø§Ù„ÙˆÙ‚Øª</div>
              <div class="v" id="time">60</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="titleRow">
            <h2>Ø£Ø¬ÙˆØ§Ø¡ Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</h2>
            <div class="hint">ÙÙˆØ§Ù†ÙŠØ³ + Ù‡Ù„Ø§Ù„ + Ù†Ø¬ÙˆÙ…</div>
          </div>
          <div class="instructions">
            <div class="pill">ğŸª” ÙÙˆØ§Ù†ÙŠØ³ Ø«Ù„Ø§Ø«ÙŠØ© Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (ØªØ£Ø±Ø¬Ø­ Ø®ÙÙŠÙ)</div>
            <div class="pill">ğŸŒ™ Ù‡Ù„Ø§Ù„ 3D Ù…Ø¹ Ù„Ù…Ø¹Ø§Ù† Ø°Ù‡Ø¨ÙŠ</div>
            <div class="pill">âœ¨ Ù†Ø¬ÙˆÙ… ØªØªØ·Ø§ÙŠØ± ÙˆØ®Ù„ÙÙŠØ© Ø¶Ø¨Ø§Ø¨ÙŠØ©</div>
            <div class="pill">ğŸ’¡ Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ© Ø®ÙÙŠÙØ© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„</div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div>ØµÙ…Ù‘Ù…Ù†Ø§Ù‡Ø§ Ø®ÙÙŠÙØ© ÙˆØ³Ø±ÙŠØ¹Ø© ğŸ®</div>
        <div><a href="./index.html">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></div>
      </div>
    </div>
  </div>

  <div id="toast">ØªÙ… âœ…</div>

  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

  <script>
    // ====== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© ======
    const canvas = document.getElementById('stage');
    const scoreEl = document.getElementById('score');
    const bestEl  = document.getElementById('best');
    const timeEl  = document.getElementById('time');
    const toast   = document.getElementById('toast');

    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const backBtn  = document.getElementById('backBtn');

    const LS_BEST = "ramadan_game_best";

    let score = 0;
    let best  = Number(localStorage.getItem(LS_BEST) || 0);
    let timeLeft = 60;
    let running = false;
    bestEl.textContent = best;

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 900);
    }

    // ====== Three.js Scene ======
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
    renderer.setSize(innerWidth, innerHeight);

    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(55, innerWidth/innerHeight, 0.1, 200);
    camera.position.set(0, 1.8, 8);

    // Ø¥Ø¶Ø§Ø¡Ø© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ©
    const ambient = new THREE.AmbientLight(0xffffff, 0.45);
    scene.add(ambient);

    const key = new THREE.DirectionalLight(0xfff2cc, 1.2);
    key.position.set(4, 6, 3);
    scene.add(key);

    const fill = new THREE.DirectionalLight(0x6ea2ff, 0.55);
    fill.position.set(-5, 3, 2);
    scene.add(fill);

    const rim = new THREE.PointLight(0xf7d16a, 1.2, 30);
    rim.position.set(0, 2.5, -6);
    scene.add(rim);

    // Ø®Ù„ÙÙŠØ© Ø¶Ø¨Ø§Ø¨
    scene.fog = new THREE.FogExp2(0x050d1a, 0.06);

    // Ø£Ø±Ø¶ÙŠØ© Ø®ÙÙŠÙØ©
    const floorGeo = new THREE.PlaneGeometry(50, 50);
    const floorMat = new THREE.MeshStandardMaterial({
      color: 0x07162d,
      roughness: 1,
      metalness: 0,
      transparent:true,
      opacity:0.28
    });
    const floor = new THREE.Mesh(floorGeo, floorMat);
    floor.rotation.x = -Math.PI/2;
    floor.position.y = -0.2;
    scene.add(floor);

    // Ù†Ø¬ÙˆÙ… ØµØºÙŠØ±Ø© (Particles)
    const starCount = 500;
    const starGeo = new THREE.BufferGeometry();
    const starPos = new Float32Array(starCount * 3);
    for(let i=0;i<starCount;i++){
      const r = 18*Math.random()+2;
      const a = Math.random()*Math.PI*2;
      const y = (Math.random()*10)-1;
      starPos[i*3]   = Math.cos(a)*r;
      starPos[i*3+1] = y;
      starPos[i*3+2] = Math.sin(a)*r - 8;
    }
    starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
    const starMat = new THREE.PointsMaterial({ color:0xffffff, size:0.03, transparent:true, opacity:0.8 });
    const stars = new THREE.Points(starGeo, starMat);
    scene.add(stars);

    // Ù‡Ù„Ø§Ù„ (Ø´ÙƒÙ„ Ø¨Ø³ÙŠØ·)
    function makeCrescent(){
      const group = new THREE.Group();

      const outer = new THREE.SphereGeometry(1.2, 48, 48);
      const inner = new THREE.SphereGeometry(1.05, 48, 48);

      const gold = new THREE.MeshStandardMaterial({
        color:0xf7d16a,
        metalness: 0.8,
        roughness: 0.25,
        emissive: 0x332200,
        emissiveIntensity: 0.35
      });

      const outerMesh = new THREE.Mesh(outer, gold);
      const innerMesh = new THREE.Mesh(inner, new THREE.MeshStandardMaterial({ color:0x050d1a, metalness:0, roughness:1 }));

      innerMesh.position.x = 0.45;

      group.add(outerMesh);
      group.add(innerMesh);

      group.scale.set(1.05,1.05,1.05);
      group.position.set(-3.2, 2.6, -5.5);
      group.rotation.set(0.1, 0.5, -0.2);

      return group;
    }
    const crescent = makeCrescent();
    scene.add(crescent);

    // ÙØ§Ù†ÙˆØ³ 3D Ø¨Ø³ÙŠØ· (Cylinder + Glass)
    function makeLantern(x, y, z){
      const g = new THREE.Group();

      const topGeo = new THREE.CylinderGeometry(0.25, 0.35, 0.35, 18);
      const baseGeo = new THREE.CylinderGeometry(0.35, 0.28, 0.30, 18);
      const bodyGeo = new THREE.CylinderGeometry(0.30, 0.30, 0.9, 18);

      const metal = new THREE.MeshStandardMaterial({ color:0x2b3a55, metalness:0.7, roughness:0.35 });
      const glass = new THREE.MeshStandardMaterial({
        color:0xf7d16a,
        transparent:true,
        opacity:0.55,
        metalness:0.2,
        roughness:0.15,
        emissive:0x553300,
        emissiveIntensity:0.7
      });

      const top = new THREE.Mesh(topGeo, metal);
      const base = new THREE.Mesh(baseGeo, metal);
      const body = new THREE.Mesh(bodyGeo, glass);

      top.position.y = 0.65;
      base.position.y = -0.60;

      g.add(top, body, base);

      // Ø³Ù„Ùƒ
      const wire = new THREE.Mesh(
        new THREE.TorusGeometry(0.12, 0.02, 12, 22),
        metal
      );
      wire.rotation.x = Math.PI/2;
      wire.position.y = 0.9;
      g.add(wire);

      // Ø¶ÙˆØ¡ Ø¯Ø§Ø®Ù„ÙŠ
      const light = new THREE.PointLight(0xf7d16a, 1.1, 6);
      light.position.y = 0.05;
      g.add(light);

      g.position.set(x, y, z);
      return g;
    }

    const lantern1 = makeLantern(2.6, 1.3, -4.5);
    const lantern2 = makeLantern(3.6, 2.2, -6.0);
    scene.add(lantern1, lantern2);

    // Ù†Ø¬Ù…Ø© Ø§Ù„Ù‡Ø¯Ù (Ø§Ù„Ù„ÙŠ Ù†Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§)
    const target = new THREE.Mesh(
      new THREE.IcosahedronGeometry(0.22, 0),
      new THREE.MeshStandardMaterial({
        color:0xffffff,
        metalness:0.65,
        roughness:0.2,
        emissive:0x0a1a2f,
        emissiveIntensity:0.6
      })
    );
    scene.add(target);

    // Ù‡Ø§Ù„Ø© Ø­ÙˆÙ„ Ø§Ù„Ù†Ø¬Ù…Ø©
    const halo = new THREE.Mesh(
      new THREE.RingGeometry(0.28, 0.45, 48),
      new THREE.MeshBasicMaterial({ color:0xf7d16a, transparent:true, opacity:0.65, side:THREE.DoubleSide })
    );
    halo.rotation.x = -Math.PI/2;
    scene.add(halo);

    function placeTarget(){
      // Ù†Ø·Ø§Ù‚ Ù…Ù†Ø§Ø³Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„
      const x = (Math.random()*5.6)-2.8;
      const y = (Math.random()*2.4)+0.5;
      const z = (Math.random()*-2.8)-2.2;
      target.position.set(x, y, z);
      halo.position.set(x, -0.18, z+0.2);
    }
    placeTarget();

    // Raycaster Ù„Ù„Ù†Ù‚Ø±
    const raycaster = new THREE.Raycaster();
    const pointer = new THREE.Vector2();

    function onPointer(e){
      if(!running) return;

      const rect = canvas.getBoundingClientRect();
      const x = (( (e.clientX ?? e.touches?.[0]?.clientX) - rect.left) / rect.width) * 2 - 1;
      const y = -((( (e.clientY ?? e.touches?.[0]?.clientY) - rect.top) / rect.height) * 2 - 1);
      pointer.set(x, y);

      raycaster.setFromCamera(pointer, camera);
      const hits = raycaster.intersectObject(target, false);

      if(hits.length){
        // Ù†Ø¬Ø­
        score += 10;
        scoreEl.textContent = score;

        // ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ·
        target.material.emissiveIntensity = 1.4;
        halo.material.opacity = 0.95;
        setTimeout(()=>{
          target.material.emissiveIntensity = 0.6;
          halo.material.opacity = 0.65;
        }, 120);

        placeTarget();
        showToast("âœ¨ Ù…Ù…ØªØ§Ø²! +10");
      } else {
        // Ø®Ø·Ø£ Ø¨Ø³ÙŠØ·
        showToast("Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©");
      }
    }

    window.addEventListener('click', onPointer, { passive:true });
    window.addEventListener('touchstart', onPointer, { passive:true });

    // Ø²Ø± Space: ÙˆÙ…ÙŠØ¶
    window.addEventListener('keydown', (e)=>{
      if(e.code === "Space"){
        rim.intensity = 2.2;
        setTimeout(()=> rim.intensity = 1.2, 120);
      }
    });

    // ØªØ­Ø±ÙŠÙƒ Ù†Ø§Ø¹Ù…
    let t = 0;
    function animate(){
      requestAnimationFrame(animate);
      t += 0.01;

      stars.rotation.y += 0.0009;

      // ØªÙ…Ø§ÙŠÙ„ Ø§Ù„ÙÙˆØ§Ù†ÙŠØ³
      lantern1.rotation.z = Math.sin(t*1.2) * 0.08;
      lantern2.rotation.z = Math.cos(t*1.05) * 0.08;

      // Ù„Ù…Ø¹Ø§Ù† Ø§Ù„Ù†Ø¬Ù…Ø©
      target.rotation.x += 0.02;
      target.rotation.y += 0.018;
      target.position.x += Math.sin(t*1.6) * 0.002;
      target.position.y += Math.cos(t*1.3) * 0.002;

      // Ø§Ù„Ù‡Ø§Ù„Ø© ØªØªÙ†ÙØ³
      halo.material.opacity = 0.55 + Math.sin(t*2.2)*0.18;

      renderer.render(scene, camera);
    }
    animate();

    // Responsive
    addEventListener('resize', ()=>{
      renderer.setSize(innerWidth, innerHeight);
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
    });

    // ====== Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© ======
    let timer = null;

    function resetGame(){
      score = 0;
      timeLeft = 60;
      scoreEl.textContent = score;
      timeEl.textContent = timeLeft;
      placeTarget();
      showToast("ØªÙ… Ø§Ù„ØªØµÙÙŠØ± âœ…");
    }

    function startGame(){
      if(running) return;
      running = true;
      startBtn.textContent = "âœ… Ø´ØºÙ‘Ø§Ù„Ø©";
      startBtn.disabled = true;

      timeLeft = 60;
      timeEl.textContent = timeLeft;

      timer = setInterval(()=>{
        timeLeft--;
        timeEl.textContent = timeLeft;

        if(timeLeft <= 0){
          clearInterval(timer);
          running = false;
          startBtn.disabled = false;
          startBtn.textContent = "ğŸš€ Ø§Ø¨Ø¯Ø£";

          if(score > best){
            best = score;
            localStorage.setItem(LS_BEST, String(best));
            bestEl.textContent = best;
            showToast("ğŸ† Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯!");
          } else {
            showToast("Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª â³");
          }
        }
      }, 1000);

      showToast("Ø¨Ø¯Ø£Ù†Ø§! Ø§Ù„ØªÙ‚Ø· Ø§Ù„Ù†Ø¬ÙˆÙ… âœ¨");
    }

    startBtn.addEventListener('click', startGame);
    resetBtn.addEventListener('click', resetGame);
    backBtn.addEventListener('click', ()=> location.href = "./index.html");
  </script>
</body>
</html>
